// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"github.com/gin-gonic/gin"
	"github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin"
	"github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/infra"
	"github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/mall"
	product2 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/mall/product"
	promotion2 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/mall/promotion"
	trade3 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/mall/trade"
	brokerage2 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/mall/trade/brokerage"
	member2 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/member"
	pay3 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/pay"
	wallet2 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/pay/wallet"
	"github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/statistics"
	system2 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/admin/system"
	"github.com/wxlbd/ruoyi-mall-go/internal/api/handler/app"
	mall2 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/app/mall"
	product4 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/app/mall/product"
	promotion3 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/app/mall/promotion"
	trade4 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/app/mall/trade"
	brokerage3 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/app/mall/trade/brokerage"
	member3 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/app/member"
	pay4 "github.com/wxlbd/ruoyi-mall-go/internal/api/handler/app/pay"
	"github.com/wxlbd/ruoyi-mall-go/internal/api/router"
	"github.com/wxlbd/ruoyi-mall-go/internal/middleware"
	"github.com/wxlbd/ruoyi-mall-go/internal/pkg/permission"
	"github.com/wxlbd/ruoyi-mall-go/internal/pkg/websocket"
	"github.com/wxlbd/ruoyi-mall-go/internal/repo"
	"github.com/wxlbd/ruoyi-mall-go/internal/repo/pay"
	product3 "github.com/wxlbd/ruoyi-mall-go/internal/repo/product"
	trade2 "github.com/wxlbd/ruoyi-mall-go/internal/repo/trade"
	infra2 "github.com/wxlbd/ruoyi-mall-go/internal/service/infra"
	"github.com/wxlbd/ruoyi-mall-go/internal/service/mall/product"
	"github.com/wxlbd/ruoyi-mall-go/internal/service/mall/promotion"
	"github.com/wxlbd/ruoyi-mall-go/internal/service/mall/trade"
	"github.com/wxlbd/ruoyi-mall-go/internal/service/mall/trade/brokerage"
	"github.com/wxlbd/ruoyi-mall-go/internal/service/mall/trade/calculators"
	client2 "github.com/wxlbd/ruoyi-mall-go/internal/service/mall/trade/delivery/client"
	"github.com/wxlbd/ruoyi-mall-go/internal/service/member"
	pay2 "github.com/wxlbd/ruoyi-mall-go/internal/service/pay"
	"github.com/wxlbd/ruoyi-mall-go/internal/service/pay/client"
	"github.com/wxlbd/ruoyi-mall-go/internal/service/pay/job"
	"github.com/wxlbd/ruoyi-mall-go/internal/service/pay/wallet"
	"github.com/wxlbd/ruoyi-mall-go/internal/service/system"
	"github.com/wxlbd/ruoyi-mall-go/pkg/cache"
	"github.com/wxlbd/ruoyi-mall-go/pkg/database"
	"github.com/wxlbd/ruoyi-mall-go/pkg/logger"
)

import (
	_ "github.com/wxlbd/ruoyi-mall-go/internal/service/pay/client/alipay"
	_ "github.com/wxlbd/ruoyi-mall-go/internal/service/pay/client/weixin"
)

// Injectors from wire.go:

func InitApp() (*gin.Engine, error) {
	db := database.InitDB()
	redisClient := cache.InitRedis()
	query := repo.NewQuery(db)
	configService := system.NewConfigService(query)
	configHandler := infra.NewConfigHandler(configService)
	fileConfigService := infra2.NewFileConfigService(query)
	fileConfigHandler := infra.NewFileConfigHandler(fileConfigService)
	fileService := infra2.NewFileService(query, fileConfigService)
	fileHandler := infra.NewFileHandler(fileService)
	apiAccessLogService := infra2.NewApiAccessLogService(query)
	apiAccessLogHandler := infra.NewApiAccessLogHandler(apiAccessLogService)
	apiErrorLogService := infra2.NewApiErrorLogService(query)
	apiErrorLogHandler := infra.NewApiErrorLogHandler(apiErrorLogService)
	zapLogger := logger.NewLogger()
	payTransferRepository := pay.NewPayTransferRepository(query)
	payClientFactory := client.NewPayClientFactory()
	payChannelService := pay2.NewPayChannelService(query, payClientFactory)
	payAppService := pay2.NewPayAppService(query, payChannelService)
	payNotifyService := pay2.NewPayNotifyService(query, zapLogger, redisClient)
	payNoRedisDAO := pay.NewPayNoRedisDAO(redisClient)
	payTransferService := pay2.NewPayTransferService(payTransferRepository, payAppService, payChannelService, payNotifyService, payClientFactory, payNoRedisDAO, zapLogger)
	payTransferSyncJob := job.NewPayTransferSyncJob(payTransferService, zapLogger)
	payNotifyJob := job.NewPayNotifyJob(payNotifyService)
	payOrderService := pay2.NewPayOrderService(query, payAppService, payChannelService, payClientFactory, payNotifyService, payNoRedisDAO)
	payOrderSyncJob := job.NewPayOrderSyncJob(payOrderService)
	payOrderExpireJob := job.NewPayOrderExpireJob(payOrderService)
	payRefundService := pay2.NewPayRefundService(query, payAppService, payChannelService, payOrderService, payNotifyService, payNoRedisDAO)
	payRefundSyncJob := job.NewPayRefundSyncJob(payRefundService)
	v := ProvideJobHandlers(payTransferSyncJob, payNotifyJob, payOrderSyncJob, payOrderExpireJob, payRefundSyncJob)
	scheduler, err := infra2.NewScheduler(query, zapLogger, v)
	if err != nil {
		return nil, err
	}
	jobService := infra2.NewJobService(query, scheduler)
	jobHandler := infra.NewJobHandler(jobService)
	jobLogService := infra2.NewJobLogService(query)
	jobLogHandler := infra.NewJobLogHandler(jobLogService)
	manager := websocket.NewManager()
	webSocketHandler := infra.NewWebSocketHandler(manager, zapLogger)
	handlers := infra.NewHandlers(configHandler, fileConfigHandler, fileHandler, apiAccessLogHandler, apiErrorLogHandler, jobHandler, jobLogHandler, webSocketHandler)
	productBrandService := product.NewProductBrandService(query)
	productBrandHandler := product2.NewProductBrandHandler(productBrandService)
	productPropertyValueService := product.NewProductPropertyValueService(query)
	productPropertyService := product.NewProductPropertyService(query, productPropertyValueService)
	productSkuService := product.NewProductSkuService(query, productPropertyService, productPropertyValueService)
	productCategoryService := product.NewProductCategoryService(query)
	productSpuService := product.NewProductSpuService(query, productSkuService, productBrandService, productCategoryService)
	productBrowseHistoryService := product.NewProductBrowseHistoryService(query, productSpuService)
	productBrowseHistoryHandler := product2.NewProductBrowseHistoryHandler(productBrowseHistoryService)
	productCategoryHandler := product2.NewProductCategoryHandler(productCategoryService)
	productCommentService := product.NewProductCommentService(query, productSpuService, productSkuService)
	productCommentHandler := product2.NewProductCommentHandler(productCommentService)
	productFavoriteService := product.NewProductFavoriteService(query, productSpuService)
	productFavoriteHandler := product2.NewProductFavoriteHandler(productFavoriteService)
	productPropertyHandler := product2.NewProductPropertyHandler(productPropertyService, productPropertyValueService)
	productSpuHandler := product2.NewProductSpuHandler(productSpuService, productPropertyService)
	productHandlers := product2.NewHandlers(productBrandHandler, productBrowseHistoryHandler, productCategoryHandler, productCommentHandler, productFavoriteHandler, productPropertyHandler, productSpuHandler)
	articleService := promotion.NewArticleService(query)
	articleHandler := promotion2.NewArticleHandler(articleService)
	articleCategoryService := promotion.NewArticleCategoryService(query)
	articleCategoryHandler := promotion2.NewArticleCategoryHandler(articleCategoryService)
	promotionBannerService := promotion.NewPromotionBannerService(query)
	bannerHandler := promotion2.NewBannerHandler(promotionBannerService)
	bargainActivityService := promotion.NewBargainActivityService(query, productSpuService, productSkuService)
	bargainRecordService := promotion.NewBargainRecordService(query)
	bargainHelpService := promotion.NewBargainHelpService(query)
	bargainActivityHandler := promotion2.NewBargainActivityHandler(bargainActivityService, bargainRecordService, bargainHelpService, productSpuService)
	smsTemplateService := system.NewSmsTemplateService(query)
	smsLogService := system.NewSmsLogService(query)
	smsClientFactory := system.NewSmsClientFactory()
	smsSendService := system.NewSmsSendService(query, smsTemplateService, smsLogService, smsClientFactory)
	smsCodeService := system.NewSmsCodeService(query, redisClient, smsSendService)
	memberLevelService := member.NewMemberLevelService(query)
	socialUserService := system.NewSocialUserService(query)
	memberUserService := member.NewMemberUserService(query, smsCodeService, memberLevelService, socialUserService)
	bargainHelpHandler := promotion2.NewBargainHelpHandler(bargainHelpService, memberUserService)
	bargainRecordHandler := promotion2.NewBargainRecordHandler(bargainRecordService, bargainActivityService, memberUserService)
	combinationActivityService := promotion.NewCombinationActivityService(query, productSpuService, productSkuService)
	defaultPromotionPriceCalculator := trade.NewDefaultPromotionPriceCalculator(query)
	priceCalculatorHelper := trade.NewPriceCalculatorHelper(zapLogger)
	bargainActivityPriceCalculator := calculators.NewBargainActivityPriceCalculator(defaultPromotionPriceCalculator, priceCalculatorHelper, zapLogger)
	combinationActivityPriceCalculator := calculators.NewCombinationActivityPriceCalculator(defaultPromotionPriceCalculator, priceCalculatorHelper, zapLogger)
	couponUserService := promotion.NewCouponUserService(query)
	couponPriceCalculator := calculators.NewCouponPriceCalculator(couponUserService, priceCalculatorHelper, zapLogger)
	deliveryExpressTemplateService := trade.NewDeliveryExpressTemplateService(query)
	memberAddressService := member.NewMemberAddressService(query)
	deliveryPriceCalculator := calculators.NewDeliveryPriceCalculator(deliveryExpressTemplateService, memberAddressService, productSpuService, priceCalculatorHelper, zapLogger)
	discountActivityService := promotion.NewDiscountActivityService(query, productSkuService)
	discountActivityPriceCalculator := calculators.NewDiscountActivityPriceCalculator(discountActivityService, memberUserService, memberLevelService, priceCalculatorHelper, zapLogger)
	pointActivityPriceCalculator := calculators.NewPointActivityPriceCalculator(defaultPromotionPriceCalculator, priceCalculatorHelper, zapLogger)
	memberConfigService := member.NewMemberConfigService(query)
	pointGivePriceCalculator := calculators.NewPointGivePriceCalculator(memberConfigService, priceCalculatorHelper, zapLogger)
	pointUsePriceCalculator := calculators.NewPointUsePriceCalculator(memberConfigService, memberUserService, priceCalculatorHelper, zapLogger)
	rewardActivityService := promotion.NewRewardActivityService(query)
	rewardActivityPriceCalculator := calculators.NewRewardActivityPriceCalculator(rewardActivityService, priceCalculatorHelper, zapLogger)
	seckillConfigService := promotion.NewSeckillConfigService(query)
	seckillActivityService := promotion.NewSeckillActivityService(query, seckillConfigService, productSpuService, productSkuService)
	seckillActivityPriceCalculator := calculators.NewSeckillActivityPriceCalculator(seckillActivityService, priceCalculatorHelper, zapLogger)
	v2 := ProvidePriceCalculators(bargainActivityPriceCalculator, combinationActivityPriceCalculator, couponPriceCalculator, deliveryPriceCalculator, discountActivityPriceCalculator, pointActivityPriceCalculator, pointGivePriceCalculator, pointUsePriceCalculator, rewardActivityPriceCalculator, seckillActivityPriceCalculator)
	tradePriceService := trade.NewTradePriceService(v2, priceCalculatorHelper, productSkuService, productSpuService, rewardActivityService, discountActivityPriceCalculator, discountActivityService, memberUserService, memberLevelService, zapLogger)
	cartService := trade.NewCartService(query, productSkuService, productSpuService)
	tradeConfigService := trade.NewTradeConfigService(query)
	tradeOrderLogRepository := repo.NewTradeOrderLogRepository(query)
	tradeOrderLogService := trade.NewTradeOrderLogService(tradeOrderLogRepository)
	tradeNoRedisDAO := trade2.NewTradeNoRedisDAO(redisClient)
	tradeOrderUpdateService := trade.NewTradeOrderUpdateService(query, tradePriceService, cartService, memberAddressService, payOrderService, payRefundService, payAppService, tradeConfigService, productSkuService, productCommentService, couponUserService, memberUserService, tradeOrderLogService, tradeNoRedisDAO, zapLogger)
	socialClientService := system.NewSocialClientService(query)
	combinationRecordService := promotion.NewCombinationRecordService(query, combinationActivityService, memberUserService, productSpuService, productSkuService, tradeOrderUpdateService, socialClientService)
	combinationActivityHandler := promotion2.NewCombinationActivityHandler(combinationActivityService, combinationRecordService, productSpuService)
	combinationRecordHandler := promotion2.NewCombinationRecordHandler(combinationRecordService, combinationActivityService)
	couponService := promotion.NewCouponService(query, memberUserService)
	couponHandler := promotion2.NewCouponHandler(couponService)
	discountActivityHandler := promotion2.NewDiscountActivityHandler(discountActivityService)
	diyTemplateService := promotion.NewDiyTemplateService(query)
	diyPageService := promotion.NewDiyPageService(query, diyTemplateService)
	diyPageHandler := promotion2.NewDiyPageHandler(diyPageService)
	diyTemplateHandler := promotion2.NewDiyTemplateHandler(diyTemplateService)
	deptService := system.NewDeptService(query)
	userService := system.NewUserService(query, deptService)
	kefuService := promotion.NewKefuService(query, memberUserService, userService, manager)
	kefuHandler := promotion2.NewKefuHandler(kefuService)
	pointActivityService := promotion.NewPointActivityService(query, productSpuService, productSkuService)
	pointActivityHandler := promotion2.NewPointActivityHandler(pointActivityService, productSpuService)
	rewardActivityHandler := promotion2.NewRewardActivityHandler(rewardActivityService)
	seckillActivityHandler := promotion2.NewSeckillActivityHandler(seckillActivityService, productSpuService)
	seckillConfigHandler := promotion2.NewSeckillConfigHandler(seckillConfigService)
	promotionHandlers := promotion2.NewHandlers(articleHandler, articleCategoryHandler, bannerHandler, bargainActivityHandler, bargainHelpHandler, bargainRecordHandler, combinationActivityHandler, combinationRecordHandler, couponHandler, discountActivityHandler, diyPageHandler, diyTemplateHandler, kefuHandler, pointActivityHandler, rewardActivityHandler, seckillActivityHandler, seckillConfigHandler)
	expressClientFactoryImpl := client2.NewExpressClientFactory()
	deliveryExpressService := trade.NewDeliveryExpressService(query)
	tradeOrderQueryService := trade.NewTradeOrderQueryService(query, expressClientFactoryImpl, deliveryExpressService)
	afterSaleLogRepository := repo.NewAfterSaleLogRepository(query)
	afterSaleLogService := trade.NewAfterSaleLogService(afterSaleLogRepository)
	tradeAfterSaleService := trade.NewTradeAfterSaleService(query, tradeOrderUpdateService, tradeOrderQueryService, deliveryExpressService, tradeNoRedisDAO, payRefundService, combinationRecordService, memberUserService, afterSaleLogService, tradeOrderLogService, tradeConfigService, payAppService)
	tradeAfterSaleHandler := trade3.NewTradeAfterSaleHandler(tradeAfterSaleService)
	tradeConfigHandler := trade3.NewTradeConfigHandler(tradeConfigService)
	deliveryExpressHandler := trade3.NewDeliveryExpressHandler(deliveryExpressService, zapLogger)
	deliveryPickUpStoreService := trade.NewDeliveryPickUpStoreService(query)
	deliveryPickUpStoreHandler := trade3.NewDeliveryPickUpStoreHandler(deliveryPickUpStoreService, zapLogger)
	deliveryExpressTemplateHandler := trade3.NewDeliveryExpressTemplateHandler(deliveryExpressTemplateService, zapLogger)
	tradeOrderHandler := trade3.NewTradeOrderHandler(tradeOrderUpdateService, tradeOrderQueryService, memberUserService, deliveryExpressTemplateService)
	brokerageRecordService := brokerage.NewBrokerageRecordService(query, zapLogger, tradeConfigService, productSpuService, productSkuService)
	brokerageRecordHandler := brokerage2.NewBrokerageRecordHandler(zapLogger, brokerageRecordService, memberUserService)
	brokerageUserService := brokerage.NewBrokerageUserService(query, zapLogger, memberUserService, tradeConfigService)
	brokerageUserHandler := brokerage2.NewBrokerageUserHandler(brokerageUserService, memberUserService, zapLogger)
	payWalletTransactionService := wallet.NewPayWalletTransactionService(query)
	payWalletService := wallet.NewPayWalletService(query, redisClient, payWalletTransactionService)
	brokerageWithdrawService := brokerage.NewBrokerageWithdrawService(query, zapLogger, brokerageRecordService, payTransferService, payWalletService, tradeConfigService, memberUserService)
	brokerageWithdrawHandler := brokerage2.NewBrokerageWithdrawHandler(brokerageWithdrawService, memberUserService)
	brokerageHandlers := brokerage2.NewHandlers(brokerageRecordHandler, brokerageUserHandler, brokerageWithdrawHandler)
	tradeHandlers := trade3.NewHandlers(tradeAfterSaleHandler, tradeConfigHandler, deliveryExpressHandler, deliveryPickUpStoreHandler, deliveryExpressTemplateHandler, tradeOrderHandler, brokerageHandlers)
	mallHandlers := mall.NewHandlers(productHandlers, promotionHandlers, tradeHandlers)
	memberConfigHandler := member2.NewMemberConfigHandler(memberConfigService)
	memberGroupService := member.NewMemberGroupService(query)
	memberGroupHandler := member2.NewMemberGroupHandler(memberGroupService)
	memberLevelHandler := member2.NewMemberLevelHandler(memberLevelService)
	memberPointRecordService := member.NewMemberPointRecordService(query, memberUserService)
	memberPointRecordHandler := member2.NewMemberPointRecordHandler(memberPointRecordService, memberUserService)
	memberSignInConfigService := member.NewMemberSignInConfigService(query)
	memberSignInConfigHandler := member2.NewMemberSignInConfigHandler(memberSignInConfigService)
	memberSignInRecordService := member.NewMemberSignInRecordService(query, memberSignInConfigService, memberUserService, memberPointRecordService, memberLevelService)
	memberSignInRecordHandler := member2.NewMemberSignInRecordHandler(memberSignInRecordService, memberUserService)
	memberTagService := member.NewMemberTagService(query, memberUserService)
	memberTagHandler := member2.NewMemberTagHandler(memberTagService)
	memberUserHandler := member2.NewMemberUserHandler(memberUserService, memberLevelService, memberPointRecordService, memberGroupService, memberTagService)
	memberHandlers := member2.NewHandlers(memberConfigHandler, memberGroupHandler, memberLevelHandler, memberPointRecordHandler, memberSignInConfigHandler, memberSignInRecordHandler, memberTagHandler, memberUserHandler)
	payAppHandler := pay3.NewPayAppHandler(payAppService)
	payChannelHandler := pay3.NewPayChannelHandler(payChannelService)
	payNotifyHandler := pay3.NewPayNotifyHandler(payNotifyService, payAppService, payChannelService, payOrderService, payRefundService, payTransferService, zapLogger)
	payOrderHandler := pay3.NewPayOrderHandler(payOrderService, payAppService, payWalletService)
	payRefundHandler := pay3.NewPayRefundHandler(payRefundService, payAppService, payOrderService)
	payTransferHandler := pay3.NewPayTransferHandler(payTransferService)
	payWalletRechargePackageService := wallet.NewPayWalletRechargePackageService(query)
	payWalletRechargeService := wallet.NewPayWalletRechargeService(query, payWalletService, payWalletTransactionService, payWalletRechargePackageService, payOrderService, payRefundService, payNotifyService, payChannelService)
	payWalletRechargeHandler := wallet2.NewPayWalletRechargeHandler(payWalletRechargeService)
	payWalletRechargePackageHandler := wallet2.NewPayWalletRechargePackageHandler(payWalletRechargePackageService)
	payWalletTransactionHandler := wallet2.NewPayWalletTransactionHandler(payWalletTransactionService)
	payWalletHandler := wallet2.NewPayWalletHandler(payWalletService)
	walletHandlers := wallet2.NewHandlers(payWalletRechargeHandler, payWalletRechargePackageHandler, payWalletTransactionHandler, payWalletHandler)
	payHandlers := pay3.NewHandlers(payAppHandler, payChannelHandler, payNotifyHandler, payOrderHandler, payRefundHandler, payTransferHandler, walletHandlers)
	memberStatisticsRepositoryImpl := repo.NewMemberStatisticsRepository(query, db)
	memberStatisticsService := member.NewMemberStatisticsService(memberStatisticsRepositoryImpl)
	tradeOrderStatisticsRepositoryImpl := repo.NewTradeOrderStatisticsRepository(query)
	tradeOrderStatisticsService := trade.NewTradeOrderStatisticsServiceV2(tradeOrderStatisticsRepositoryImpl)
	apiAccessLogStatisticsRepositoryImpl := repo.NewApiAccessLogStatisticsRepository(query)
	apiAccessLogStatisticsService := infra2.NewApiAccessLogStatisticsService(apiAccessLogStatisticsRepositoryImpl)
	memberStatisticsHandler := statistics.NewMemberStatisticsHandler(memberStatisticsService, tradeOrderStatisticsService, apiAccessLogStatisticsService)
	payWalletStatisticsRepositoryImpl := repo.NewPayWalletStatisticsRepository(query)
	payWalletStatisticsService := pay2.NewPayWalletStatisticsService(payWalletStatisticsRepositoryImpl)
	payStatisticsHandler := statistics.NewPayStatisticsHandler(payWalletStatisticsService)
	productStatisticsRepositoryImpl := product3.NewProductStatisticsRepository(query, db)
	productStatisticsService := product.NewProductStatisticsService(productStatisticsRepositoryImpl)
	productStatisticsHandler := statistics.NewProductStatisticsHandler(productStatisticsService, productSpuService)
	tradeStatisticsRepositoryImpl := repo.NewTradeStatisticsRepository(query)
	afterSaleStatisticsRepositoryImpl := repo.NewAfterSaleStatisticsRepository(query)
	afterSaleStatisticsService := trade.NewAfterSaleStatisticsService(afterSaleStatisticsRepositoryImpl)
	brokerageStatisticsRepositoryImpl := repo.NewBrokerageStatisticsRepository(query)
	brokerageStatisticsService := trade.NewBrokerageStatisticsService(brokerageStatisticsRepositoryImpl)
	tradeStatisticsService := trade.NewTradeStatisticsService(tradeStatisticsRepositoryImpl, tradeOrderStatisticsService, afterSaleStatisticsService, brokerageStatisticsService)
	tradeStatisticsHandler := statistics.NewTradeStatisticsHandler(tradeStatisticsService, tradeOrderStatisticsService, afterSaleStatisticsService, brokerageStatisticsService)
	statisticsHandlers := statistics.NewHandlers(memberStatisticsHandler, payStatisticsHandler, productStatisticsHandler, tradeStatisticsHandler)
	areaHandler := system2.NewAreaHandler()
	roleService := system.NewRoleService(query)
	permissionService := system.NewPermissionService(query, roleService)
	menuService := system.NewMenuService(query)
	oAuth2TokenService := system.NewOAuth2TokenService()
	loginLogService := system.NewLoginLogService(query)
	authService := system.NewAuthService(query, permissionService, roleService, menuService, oAuth2TokenService, smsCodeService, loginLogService, userService, socialUserService)
	authHandler := system2.NewAuthHandler(authService)
	deptHandler := system2.NewDeptHandler(deptService)
	dictService := system.NewDictService(query)
	dictHandler := system2.NewDictHandler(dictService)
	loginLogHandler := system2.NewLoginLogHandler(loginLogService)
	mailService := system.NewMailService(db)
	mailHandler := system2.NewMailHandler(mailService)
	menuHandler := system2.NewMenuHandler(menuService)
	noticeService := system.NewNoticeService(query)
	noticeHandler := system2.NewNoticeHandler(noticeService, webSocketHandler)
	notifyTemplateRepositoryImpl := repo.NewNotifyTemplateRepository(query)
	notifyMessageRepositoryImpl := repo.NewNotifyMessageRepository(query)
	notifyService := system.NewNotifyService(notifyTemplateRepositoryImpl, notifyMessageRepositoryImpl)
	notifyHandler := system2.NewNotifyHandler(notifyService)
	oAuth2ClientService := system.NewOAuth2ClientService(db)
	oAuth2ClientHandler := system2.NewOAuth2ClientHandler(oAuth2ClientService)
	operateLogService := system.NewOperateLogService(query)
	operateLogHandler := system2.NewOperateLogHandler(operateLogService)
	tenantService := system.NewTenantService(query, roleService, permissionService)
	permissionHandler := system2.NewPermissionHandler(permissionService, tenantService)
	postService := system.NewPostService(query)
	postHandler := system2.NewPostHandler(postService)
	roleHandler := system2.NewRoleHandler(roleService)
	smsChannelService := system.NewSmsChannelService(query)
	smsChannelHandler := system2.NewSmsChannelHandler(smsChannelService)
	smsLogHandler := system2.NewSmsLogHandler(smsLogService)
	smsTemplateHandler := system2.NewSmsTemplateHandler(smsTemplateService, smsSendService)
	socialClientHandler := system2.NewSocialClientHandler(socialClientService, zapLogger)
	socialUserHandler := system2.NewSocialUserHandler(socialUserService, zapLogger)
	tenantHandler := system2.NewTenantHandler(tenantService)
	tenantPackageService := system.NewTenantPackageService(query, tenantService)
	tenantPackageHandler := system2.NewTenantPackageHandler(tenantPackageService)
	userHandler := system2.NewUserHandler(userService)
	systemHandlers := system2.NewHandlers(areaHandler, authHandler, deptHandler, dictHandler, loginLogHandler, mailHandler, menuHandler, noticeHandler, notifyHandler, oAuth2ClientHandler, operateLogHandler, permissionHandler, postHandler, roleHandler, smsChannelHandler, smsLogHandler, smsTemplateHandler, socialClientHandler, socialUserHandler, tenantHandler, tenantPackageHandler, userHandler)
	adminHandlers := &admin.AdminHandlers{
		Infra:      handlers,
		Mall:       mallHandlers,
		Member:     memberHandlers,
		Pay:        payHandlers,
		Statistics: statisticsHandlers,
		System:     systemHandlers,
	}
	appProductBrowseHistoryHandler := product4.NewAppProductBrowseHistoryHandler(productBrowseHistoryService)
	appCategoryHandler := product4.NewAppCategoryHandler(productCategoryService)
	appProductCommentHandler := product4.NewAppProductCommentHandler(productCommentService)
	appProductFavoriteHandler := product4.NewAppProductFavoriteHandler(productFavoriteService)
	appProductSpuHandler := product4.NewAppProductSpuHandler(productSpuService, productPropertyService, productBrowseHistoryService, memberUserService, memberLevelService)
	handlers2 := product4.NewHandlers(appProductBrowseHistoryHandler, appCategoryHandler, appProductCommentHandler, appProductFavoriteHandler, appProductSpuHandler)
	appActivityHandler := promotion3.NewAppActivityHandler(combinationActivityService, seckillActivityService, bargainActivityService)
	appArticleHandler := promotion3.NewAppArticleHandler(articleService, articleCategoryService)
	appBannerHandler := promotion3.NewAppBannerHandler(promotionBannerService)
	appBargainActivityHandler := promotion3.NewAppBargainActivityHandler(bargainActivityService, bargainRecordService, productSpuService)
	appBargainHelpHandler := promotion3.NewAppBargainHelpHandler(bargainHelpService, memberUserService)
	appBargainRecordHandler := promotion3.NewAppBargainRecordHandler(bargainRecordService, bargainActivityService, memberUserService, productSpuService, tradeOrderQueryService, bargainHelpService)
	appCombinationActivityHandler := promotion3.NewAppCombinationActivityHandler(combinationActivityService)
	appCombinationRecordHandler := promotion3.NewAppCombinationRecordHandler(combinationRecordService)
	appCouponHandler := promotion3.NewAppCouponHandler(couponUserService)
	appCouponTemplateHandler := promotion3.NewAppCouponTemplateHandler(couponService)
	appDiyPageHandler := promotion3.NewAppDiyPageHandler(diyPageService)
	appDiyTemplateHandler := promotion3.NewAppDiyTemplateHandler(diyTemplateService, diyPageService)
	appKefuHandler := promotion3.NewAppKefuHandler(kefuService)
	appPointActivityHandler := promotion3.NewAppPointActivityHandler(pointActivityService, productSpuService)
	appRewardActivityHandler := promotion3.NewAppRewardActivityHandler(rewardActivityService)
	appSeckillActivityHandler := promotion3.NewAppSeckillActivityHandler(seckillActivityService, seckillConfigService, productSpuService)
	appSeckillConfigHandler := promotion3.NewAppSeckillConfigHandler(seckillConfigService)
	handlers3 := promotion3.NewHandlers(appActivityHandler, appArticleHandler, appBannerHandler, appBargainActivityHandler, appBargainHelpHandler, appBargainRecordHandler, appCombinationActivityHandler, appCombinationRecordHandler, appCouponHandler, appCouponTemplateHandler, appDiyPageHandler, appDiyTemplateHandler, appKefuHandler, appPointActivityHandler, appRewardActivityHandler, appSeckillActivityHandler, appSeckillConfigHandler)
	appTradeAfterSaleHandler := trade4.NewAppTradeAfterSaleHandler(tradeAfterSaleService)
	appCartHandler := trade4.NewAppCartHandler(cartService)
	appTradeConfigHandler := trade4.NewAppTradeConfigHandler(tradeConfigService)
	appTradeOrderHandler := trade4.NewAppTradeOrderHandler(tradeOrderUpdateService, tradeOrderQueryService, tradeAfterSaleService, tradePriceService)
	appBrokerageRecordHandler := brokerage3.NewAppBrokerageRecordHandler(brokerageRecordService)
	appBrokerageUserHandler := brokerage3.NewAppBrokerageUserHandler(brokerageUserService, brokerageRecordService, brokerageWithdrawService, memberUserService)
	appBrokerageWithdrawHandler := brokerage3.NewAppBrokerageWithdrawHandler(brokerageWithdrawService, payTransferService)
	handlers4 := brokerage3.NewHandlers(appBrokerageRecordHandler, appBrokerageUserHandler, appBrokerageWithdrawHandler)
	handlers5 := trade4.NewHandlers(appTradeAfterSaleHandler, appCartHandler, appTradeConfigHandler, appTradeOrderHandler, handlers4)
	handlers6 := mall2.NewHandlers(handlers2, handlers3, handlers5)
	appMemberAddressHandler := member3.NewAppMemberAddressHandler(memberAddressService)
	memberAuthService := member.NewMemberAuthService(query, smsCodeService, memberUserService, socialUserService, oAuth2TokenService, loginLogService)
	appAuthHandler := member3.NewAppAuthHandler(memberAuthService)
	appMemberPointRecordHandler := member3.NewAppMemberPointRecordHandler(memberPointRecordService)
	appMemberSignInConfigHandler := member3.NewAppMemberSignInConfigHandler(memberSignInConfigService)
	appMemberSignInRecordHandler := member3.NewAppMemberSignInRecordHandler(memberSignInRecordService)
	appSocialUserHandler := member3.NewAppSocialUserHandler(socialUserService)
	appMemberUserHandler := member3.NewAppMemberUserHandler(memberUserService)
	handlers7 := member3.NewHandlers(appMemberAddressHandler, appAuthHandler, appMemberPointRecordHandler, appMemberSignInConfigHandler, appMemberSignInRecordHandler, appSocialUserHandler, appMemberUserHandler)
	appPayChannelHandler := pay4.NewAppPayChannelHandler(payChannelService)
	appPayOrderHandler := pay4.NewAppPayOrderHandler(payOrderService, payWalletService)
	appPayTransferHandler := pay4.NewAppPayTransferHandler(payTransferService)
	appPayWalletHandler := pay4.NewAppPayWalletHandler(payWalletService, payWalletRechargeService, payOrderService)
	appPayWalletRechargePackageHandler := pay4.NewAppPayWalletRechargePackageHandler(payWalletRechargePackageService)
	appPayWalletTransactionHandler := pay4.NewAppPayWalletTransactionHandler(payWalletTransactionService, payWalletService)
	handlers8 := pay4.NewHandlers(appPayChannelHandler, appPayOrderHandler, appPayTransferHandler, appPayWalletHandler, appPayWalletRechargePackageHandler, appPayWalletTransactionHandler)
	appHandlers := &app.AppHandlers{
		Mall:   handlers6,
		Member: handlers7,
		Pay:    handlers8,
	}
	enforcer, err := permission.InitEnforcer(db)
	if err != nil {
		return nil, err
	}
	casbinMiddleware := middleware.NewCasbinMiddleware(enforcer, permissionService)
	engine := router.InitRouter(db, redisClient, adminHandlers, appHandlers, casbinMiddleware)
	return engine, nil
}

// wire.go:

func ProvidePriceCalculators(
	bargain *calculators.BargainActivityPriceCalculator,
	combination *calculators.CombinationActivityPriceCalculator,
	coupon *calculators.CouponPriceCalculator,
	delivery *calculators.DeliveryPriceCalculator,
	discount *calculators.DiscountActivityPriceCalculator,
	pointActivity *calculators.PointActivityPriceCalculator,
	pointGive *calculators.PointGivePriceCalculator,
	pointUse *calculators.PointUsePriceCalculator,
	reward *calculators.RewardActivityPriceCalculator,
	seckill *calculators.SeckillActivityPriceCalculator,
) []trade.PriceCalculator {

	return []trade.PriceCalculator{
		seckill,
		bargain,
		combination,
		pointActivity,
		discount,
		reward,
		coupon,
		pointUse,
		delivery,
		pointGive,
	}
}

// ProvideJobHandlers 聚合所有定时任务处理器，供 Wire 使用
func ProvideJobHandlers(
	h1 *job.PayTransferSyncJob,
	h2 *job.PayNotifyJob,
	h3 *job.PayOrderSyncJob,
	h4 *job.PayOrderExpireJob,
	h5 *job.PayRefundSyncJob,
) []infra2.JobHandler {
	return []infra2.JobHandler{h1, h2, h3, h4, h5}
}
