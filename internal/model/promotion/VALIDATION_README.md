# ä¿ƒé”€æ¨¡å—å¸¸é‡éªŒè¯æ¡†æ¶

## æ¦‚è¿°

è¿™ä¸ªéªŒè¯æ¡†æ¶ç”¨äºç¡®ä¿ä¿ƒé”€æ¨¡å—ä¸­çš„å¸¸é‡å®šä¹‰ç¬¦åˆä»¥ä¸‹è¦æ±‚ï¼š
1. æ¶ˆé™¤é­”æ³•æ•°å­—
2. ä¸Javaæšä¸¾å€¼å¯¹é½
3. éµå¾ªå‘½åçº¦å®š
4. æ­£ç¡®çš„ç»„ç»‡ç»“æ„
5. æ— é‡å¤å®šä¹‰

## ä½¿ç”¨æ–¹æ³•

### 1. è¿è¡Œå®Œæ•´éªŒè¯

```bash
# åœ¨backend-goç›®å½•ä¸­è¿è¡Œ
go run ./cmd/validation -root=. -verbose

# ä¿å­˜è¯¦ç»†æŠ¥å‘Šåˆ°æ–‡ä»¶
go run ./cmd/validation -root=. -verbose -output=validation_report.txt
```

### 2. éªŒè¯ç‰¹å®šæ–‡ä»¶

```bash
go run ./cmd/validation -file=internal/model/promotion/coupon_constants.go -verbose
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰éªŒè¯æµ‹è¯•
go test ./internal/model/promotion -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
go test ./internal/model/promotion -v -run TestValidationTool_RunComprehensiveValidation
```

## éªŒè¯å†…å®¹

### 1. é­”æ³•æ•°å­—æ£€æµ‹

éªŒè¯æ¡†æ¶ä¼šæ‰«ææºç ä¸­çš„æ•°å­—å­—é¢é‡ï¼Œè¯†åˆ«å¯èƒ½çš„é­”æ³•æ•°å­—ï¼š

- ä¼˜æƒ åˆ¸çŠ¶æ€å€¼ï¼š1, 2, 3
- æ´»åŠ¨çŠ¶æ€å€¼ï¼š10, 20, 30, 40  
- è¥é”€ç±»å‹å€¼ï¼š6, 7, 8
- å…¶ä»–promotionç›¸å…³çš„æšä¸¾å€¼

### 2. Javaå¯¹é½éªŒè¯

æ£€æŸ¥Goå¸¸é‡æ˜¯å¦ä¸Javaæšä¸¾å€¼å®Œå…¨å¯¹é½ï¼š

```go
// åº”è¯¥å¯¹é½çš„å¸¸é‡ç¤ºä¾‹
const (
    CouponStatusUnused  = 1 // å¯¹é½ Java CouponStatusEnum.UNUSED = 1
    CouponStatusUsed    = 2 // å¯¹é½ Java CouponStatusEnum.USED = 2
    CouponStatusExpired = 3 // å¯¹é½ Java CouponStatusEnum.EXPIRE = 3
)
```

### 3. å‘½åçº¦å®šéªŒè¯

æ£€æŸ¥å¸¸é‡ã€å‡½æ•°å’Œå˜é‡çš„å‘½åæ˜¯å¦ç¬¦åˆGoçº¦å®šï¼š

- å¸¸é‡ï¼š`CouponStatusUnused`, `ActivityStatusWait`
- éªŒè¯å‡½æ•°ï¼š`IsValidCouponStatus`
- åˆ¤æ–­å‡½æ•°ï¼š`IsCouponStatusUnused`
- å€¼æ•°ç»„ï¼š`CouponStatusValues`

### 4. ç»„ç»‡ç»“æ„éªŒè¯

ç¡®ä¿å¸¸é‡å®šä¹‰åœ¨æ­£ç¡®çš„æ–‡ä»¶ä¸­ï¼š

- `coupon_constants.go`: ä¼˜æƒ åˆ¸ç›¸å…³å¸¸é‡
- `activity_constants.go`: æ´»åŠ¨ç›¸å…³å¸¸é‡
- `common_constants.go`: é€šç”¨å¸¸é‡
- `banner_constants.go`: Bannerç›¸å…³å¸¸é‡
- `promotion_type.go`: è¥é”€ç±»å‹å¸¸é‡

### 5. é‡å¤å®šä¹‰æ£€æµ‹

æ£€æµ‹æ˜¯å¦æœ‰é‡å¤çš„å¸¸é‡å®šä¹‰æˆ–ç›¸åŒå€¼çš„ä¸åŒå¸¸é‡ã€‚

## éªŒè¯ç»“æœè§£è¯»

### æˆåŠŸç¤ºä¾‹

```
âœ… éªŒè¯é€šè¿‡ï¼šæ‰€æœ‰æ£€æŸ¥é¡¹ç›®å‡ç¬¦åˆè¦æ±‚

ğŸ“Š ç»Ÿè®¡ä¿¡æ¯ï¼š
  - æ‰«ææ–‡ä»¶æ•°é‡: 5
  - å¸¸é‡æ€»æ•°: 45
  - å‘ç°é­”æ³•æ•°å­—: 0
  - Javaå¯¹é½é—®é¢˜: 0
  - å‘½åçº¦å®šè¿è§„: 0
  - é‡å¤å¸¸é‡: 0
```

### å¤±è´¥ç¤ºä¾‹

```
âŒ éªŒè¯å¤±è´¥ï¼šå‘ç°éœ€è¦ä¿®å¤çš„é—®é¢˜

ğŸ” è¯¦ç»†é—®é¢˜ï¼š

ğŸ“ å‘ç°çš„é­”æ³•æ•°å­—ï¼š
  - å€¼ 1 åœ¨ service/coupon.go:123:45 (ç¬¬123è¡Œé™„è¿‘)

ğŸ”„ Javaå¯¹é½é—®é¢˜ï¼š
  - CouponStatusUnused: Javaå€¼=1, Goå€¼=2

ğŸ“ å‘½åçº¦å®šè¿è§„ï¼š
  - invalidName (ç¬¬45è¡Œ): å¸¸é‡åä¸ç¬¦åˆå‘½åçº¦å®š
```

## ä¿®å¤å»ºè®®

### 1. ä¿®å¤é­”æ³•æ•°å­—

å°†é­”æ³•æ•°å­—æ›¿æ¢ä¸ºå¸¸é‡ï¼š

```go
// é”™è¯¯
if status == 1 {
    // ...
}

// æ­£ç¡®
if status == CouponStatusUnused {
    // ...
}
```

### 2. ä¿®å¤Javaå¯¹é½é—®é¢˜

ç¡®ä¿å¸¸é‡å€¼ä¸Javaæšä¸¾å®Œå…¨ä¸€è‡´ï¼š

```go
// æ£€æŸ¥Javaæºç ä¸­çš„å€¼
// Java: CouponStatusEnum.UNUSED = 1
const CouponStatusUnused = 1 // ç¡®ä¿å€¼ä¸º1
```

### 3. ä¿®å¤å‘½åçº¦å®š

æŒ‰ç…§Goå‘½åçº¦å®šé‡å‘½åï¼š

```go
// é”™è¯¯
const coupon_status_unused = 1

// æ­£ç¡®  
const CouponStatusUnused = 1
```

### 4. ä¿®å¤ç»„ç»‡ç»“æ„

å°†å¸¸é‡ç§»åŠ¨åˆ°æ­£ç¡®çš„æ–‡ä»¶ï¼š

```go
// CouponStatus* å¸¸é‡åº”è¯¥åœ¨ coupon_constants.go ä¸­
// ActivityStatus* å¸¸é‡åº”è¯¥åœ¨ activity_constants.go ä¸­
```

## é›†æˆåˆ°CI/CD

å¯ä»¥å°†éªŒè¯æ¡†æ¶é›†æˆåˆ°CI/CDæµç¨‹ä¸­ï¼š

```yaml
# GitHub Actions ç¤ºä¾‹
- name: éªŒè¯å¸¸é‡å®šä¹‰
  run: |
    cd backend-go
    go run ./cmd/validation -root=. || exit 1
```

## æ‰©å±•éªŒè¯è§„åˆ™

è¦æ·»åŠ æ–°çš„éªŒè¯è§„åˆ™ï¼Œå¯ä»¥ï¼š

1. åœ¨ `validation_framework.go` ä¸­æ·»åŠ æ–°çš„éªŒè¯é€»è¾‘
2. åœ¨ `naming_validation.go` ä¸­æ·»åŠ æ–°çš„å‘½åè§„åˆ™
3. æ›´æ–° `JavaEnumMapping` æ·»åŠ æ–°çš„Javaå¯¹é½æ£€æŸ¥
4. æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Goå€¼æ˜¾ç¤ºä¸º-1**: è¡¨ç¤ºå¸¸é‡æœªæ‰¾åˆ°æˆ–è§£æå¤±è´¥
2. **å¤§é‡é­”æ³•æ•°å­—**: å¯èƒ½éœ€è¦è°ƒæ•´ `isSuspiciousMagicNumber` çš„é€»è¾‘
3. **å‘½åè¿è§„**: æ£€æŸ¥ `GetDefaultNamingRules` ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼

### è°ƒè¯•æŠ€å·§

1. è¿è¡Œå•ä¸ªæµ‹è¯•æŸ¥çœ‹è¯¦ç»†è¾“å‡º
2. ä½¿ç”¨ `-verbose` æ ‡å¿—è·å–è¯¦ç»†ä¿¡æ¯
3. æ£€æŸ¥ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶
4. æŸ¥çœ‹æµ‹è¯•æ—¥å¿—äº†è§£å…·ä½“é—®é¢˜

## è´¡çŒ®

è¦æ”¹è¿›éªŒè¯æ¡†æ¶ï¼š

1. æ·»åŠ æ–°çš„æµ‹è¯•ç”¨ä¾‹
2. æ”¹è¿›é”™è¯¯æ¶ˆæ¯çš„å¯è¯»æ€§
3. ä¼˜åŒ–æ€§èƒ½
4. æ·»åŠ æ›´å¤šéªŒè¯è§„åˆ™
5. æ”¹è¿›æŠ¥å‘Šæ ¼å¼

## ç›¸å…³æ–‡ä»¶

- `validation_framework.go`: æ ¸å¿ƒéªŒè¯é€»è¾‘
- `naming_validation.go`: å‘½åçº¦å®šéªŒè¯
- `validation_tool.go`: ç»¼åˆéªŒè¯å·¥å…·
- `cmd/validation/main.go`: å‘½ä»¤è¡Œå·¥å…·
- `*_test.go`: æµ‹è¯•æ–‡ä»¶